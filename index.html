<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mark Palkimas' Personal Website</title>
    <link rel="stylesheet" href="app.css" />
    <script>
      // Redirect to mobile version if on a mobile device
      if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        window.location.href = "mobile.html";
      }
    </script>
    <style>
      /* =======================
         Core Element Styles
      ========================== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Roboto', sans-serif;
        scroll-behavior: smooth;
      }
      html,
      body {
        height: 100%;
        background: linear-gradient(to bottom, #ffffff, #ababab 50%);
        color: #000;
        font-size: 16px;
        line-height: 1.6;
      }
      body {
        display: flex;
        flex-direction: column;
        /* Set to slightly more than viewport so extra content (drop ball/admin) is offscreen initially */
        min-height: 105vh;
      }
      /* =======================
         Header & NavBar
      ========================== */
      header {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1000;
        background-color: rgba(0, 0, 0, 0.85);
        padding: 15px 0;
      }
      .nav-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 90%;
        max-width: 1200px;
        margin: auto;
      }
      .logo {
        font-size: 24px;
        color: #fff;
        cursor: pointer;
        transition: color 0.3s;
      }
      .logo:hover {
        color: #ffcc00;
      }
      .nav-links {
        display: flex;
        list-style: none;
        gap: 20px;
      }
      .nav-links a {
        text-decoration: none;
        color: #ffffff;
        font-weight: bold;
        transition: color 0.3s;
      }
      .nav-links a:hover {
        color: #ffcc00;
      }
      /* =======================
         Main Content Area
      ========================== */
      .content {
        padding-top: 70px; /* To clear header */
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      #about {
        width: 100%;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }
      .profile-photo {
        width: 280px;
        height: 380px;
        border-radius: 50%;
        border: 8px solid #000;
        cursor: pointer;
        transition: transform 0.3s, box-shadow 0.3s;
        margin: 0 20px;
      }
      .profile-photo:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }
      .intro-text {
        margin: 20px;
      }
      /* =======================
         Footer & Extra Content
      ========================== */
      footer {
        background-color: rgba(171, 171, 171, 1);
        width: 100%;
        text-align: center;
        padding: 15px 0;
        position: relative;
      }
      footer p {
        font-size: 1.2em;
        font-weight: bold;
        margin-bottom: 5px;
      }
      .social-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 5px;
      }
      /* Extra content (drop ball, admin buttons, copyright)
         is placed below the footer and initially offscreen */
      .extra-content {
        width: 100%;
        text-align: center;
        padding: 15px 0;
      }
      .extra-content button,
      .extra-content p {
        margin: 0 10px;
      }
      /* =======================
         Popups & Overlays
      ========================== */
      .dimmed {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        z-index: 1005;
        display: none;
      }
      .social-popup,
      .about-popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #fff;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        z-index: 1010;
        text-align: center;
        max-width: 600px;
      }
      /* About popup displays profile image and text side-by-side without distortion */
      .about-popup-content {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 30px;
      }
      .about-popup-photo {
        width: 280px;
        height: 380px;
        border-radius: 50%;
        border: 8px solid #000;
        flex-shrink: 0;
      }
      .about-popup-text {
        max-width: 350px;
        text-align: left;
      }
      .about-popup-text h2 {
        margin-bottom: 10px;
      }
      .social-popup-content {
        display: flex;
        flex-direction: column;
        gap: 30px;
        text-align: center;
      }
      .social-popup-content img {
        width: 60px;
        height: 60px;
        margin: 0 15px;
      }
      /* =======================
         Reset Button & Ball Elements
      ========================== */
      .reset-btn {
        display: none;
        background-color: #ff2222;
        color: white;
        padding: 10px 20px;
        font-size: 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 1020;
      }
      .reset-btn:hover {
        background-color: #c21010;
      }
      .ball {
        position: absolute;
        border-radius: 50%;
        z-index: 1000;
        pointer-events: none;
      }
      /* =======================
         Falling Quotes (Waterfall) Background
      ========================== */
      .quote-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        pointer-events: none;
        overflow: hidden;
        z-index: 0;
      }
      .falling-quote {
        position: absolute;
        font-size: 1.5rem;
        font-family: 'Poppins', sans-serif;
        color: rgba(0, 0, 0, 0.5);
        opacity: 0.8;
        white-space: nowrap;
        text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.8);
      }
      @keyframes fall {
        0% {
          transform: translateY(0);
          opacity: 0.8;
        }
        100% {
          transform: translateY(105vh);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <!-- Dimming Overlay for Popups -->
    <div class="dimmed"></div>
    <!-- Falling Quotes Background -->
    <div class="quote-container"></div>
    <!-- Header & Navigation -->
    <header>
      <div class="nav-bar">
        <div class="logo">Mark Palkimas</div>
        <ul class="nav-links">
          <li><a href="#about" class="about-link">About</a></li>
          <li><a href="projects.html">Projects</a></li>
          <li><a href="#contact" class="contact-link">Contact</a></li>
        </ul>
      </div>
    </header>
    <!-- Main Content -->
    <main class="content">
      <section id="about" class="section">
        <img src="profile.jpg" alt="Profile Photo" class="profile-photo" />
        <div class="intro-text">
          <h2>Hello, I'm Mark Palkimas</h2>
        </div>
        <!-- About Popup -->
        <div class="about-popup">
          <div class="about-popup-content">
            <img src="profile.jpg" alt="Profile Photo" class="about-popup-photo" />
            <div class="about-popup-text">
              <h2>About Me</h2>
              <p>This section contains more detailed information about me and my professional background.</p>
            </div>
          </div>
        </div>
      </section>
      <section id="portfolio" class="section">
        <!-- Portfolio content goes here -->
      </section>
    </main>
    <!-- Footer Contacts (Always Visible) -->
    <footer class="footer">
      <p>Contact Me</p>
      <div class="social-links">
        <a href="https://www.instagram.com/ya.boimark" target="_blank">
          <img src="iconmonstr-instagram-11-240.png" alt="Instagram" class="social-logo" />
        </a>
        <a href="https://www.linkedin.com/in/mark-palkimas-27514a230/" target="_blank">
          <img src="iconmonstr-linkedin-1-240.png" alt="LinkedIn" class="social-logo" />
        </a>
        <a href="https://github.com/MarkPalkimas" target="_blank">
          <img src="github-logo.png" alt="GitHub" class="social-logo" />
        </a>
        <a href="mailto:mark.palkimas@gmail.com" target="_blank">
          <img src="iconmonstr-gmail-1-240.png" alt="Gmail" class="social-logo" />
        </a>
        <a href="https://www.youtube.com/@markpalkimas" target="_blank">
          <img src="iconmonstr-youtube-6-240.png" alt="YouTube" class="social-logo" />
        </a>
      </div>
    </footer>
    <!-- Extra Content (Drop Ball, Admin Button, Copyright)
         This section is initially offscreen (below the 100vh view) -->
    <div class="extra-content">
      <button class="gravity-btn">Drop Ball</button>
      <button class="admin-btn">Admin</button>
      <p class="copyright">© 2024 Mark Palkimas</p>
    </div>
    <!-- Social Popup -->
    <div class="social-popup">
      <div class="social-popup-content">
        <p>Contact Links:</p>
        <div class="popup-social-links">
          <!-- Social links will be cloned here dynamically -->
        </div>
      </div>
    </div>
    <!-- Reset Button for Balls -->
    <button class="reset-btn">Reset</button>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const profilePic = document.querySelector(".profile-photo");
        const aboutPopup = document.querySelector(".about-popup");
        const aboutLink = document.querySelector(".about-link");
        const contactLink = document.querySelector(".contact-link");
        const socialLinks = document.querySelector(".social-links");
        const popup = document.querySelector(".social-popup");
        const popupContent = document.querySelector(".popup-social-links");
        const dimmedOverlay = document.querySelector(".dimmed");
        const adminBtn = document.querySelector(".admin-btn");
        const gravityBtn = document.querySelector(".gravity-btn");
        const resetBtn = document.querySelector(".reset-btn");
        const balls = [];
        const headerHeight = document.querySelector("header").offsetHeight;
        
        // --- Popup Controls ---
        profilePic.addEventListener("click", function () {
          aboutPopup.style.display = "flex";
          dimmedOverlay.style.display = "block";
        });
        aboutLink.addEventListener("click", function (e) {
          e.preventDefault();
          aboutPopup.style.display = "flex";
          dimmedOverlay.style.display = "block";
        });
        contactLink.addEventListener("click", function (e) {
          e.preventDefault();
          aboutPopup.style.display = "none";
          dimmedOverlay.style.display = "block";
          popup.style.display = "flex";
          popupContent.innerHTML = socialLinks.innerHTML;
        });
        dimmedOverlay.addEventListener("click", function () {
          aboutPopup.style.display = "none";
          popup.style.display = "none";
          dimmedOverlay.style.display = "none";
        });
        adminBtn.addEventListener("click", function () {
          const password = prompt("Enter password:");
          if (password === "mark2005") {
            window.location.href = "admin.html";
          } else {
            alert("Denied.");
          }
        });
        
        // --- Ball Gravity and Collision ---
        gravityBtn.addEventListener("click", function () {
          dropBall();
          resetBtn.style.display = "block";
        });
        resetBtn.addEventListener("click", function () {
          resetBalls();
          resetBtn.style.display = "none";
        });
        function dropBall() {
          const ball = document.createElement("div");
          ball.className = "ball";
          ball.style.backgroundColor = getRandomColor();
          const size = Math.random() * 30 + 40;
          ball.style.width = size + "px";
          ball.style.height = size + "px";
          ball.style.left = Math.random() * (window.innerWidth - 50) + "px";
          ball.velocityY = Math.random() * 4 + 1;
          ball.velocityX = Math.random() * 2 - 1;
          ball.friction = 0.8;
          ball.bounceOffset = 10;
          document.body.appendChild(ball);
          balls.push(ball);
        }
        function resetBalls() {
          balls.forEach(function (ball) {
            ball.remove();
          });
          balls.length = 0;
        }
        function getRandomColor() {
          const letters = "0123456789ABCDEF";
          let color = "#";
          for (let i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
          }
          return color;
        }
        function updateBalls() {
          const velocityCutoff = 0.01;
          balls.forEach(function (ball) {
            let currentTop = parseFloat(ball.style.top) || 0;
            let currentLeft = parseFloat(ball.style.left) || 0;
            let newTop = currentTop + ball.velocityY;
            let newLeft = currentLeft + ball.velocityX;
            // Bounce off floor: footer is fixed at bottom of contacts; extra content is below footer.
            const footerPos = document.querySelector("footer").getBoundingClientRect().top + window.scrollY - 10;
            if (newTop + ball.offsetHeight >= footerPos - ball.bounceOffset) {
              newTop = footerPos - ball.offsetHeight - ball.bounceOffset;
              ball.velocityY *= -ball.friction;
              if (Math.abs(ball.velocityY) < velocityCutoff) {
                ball.velocityY = 0;
              }
            } else {
              ball.velocityY += 0.3;
            }
            if (newLeft <= 0 || newLeft + ball.offsetWidth >= window.innerWidth) {
              newLeft = newLeft <= 0 ? 0 : window.innerWidth - ball.offsetWidth;
              ball.velocityX *= -1;
              if (Math.abs(ball.velocityX) < velocityCutoff) {
                ball.velocityX = 0;
              }
            }
            if (Math.abs(ball.velocityX) < velocityCutoff) ball.velocityX = 0;
            if (Math.abs(ball.velocityY) < velocityCutoff) ball.velocityY = 0;
            ball.style.top = newTop + "px";
            ball.style.left = newLeft + "px";
          });
          handleBallCollisions();
          requestAnimationFrame(updateBalls);
        }
        function handleBallCollisions() {
          const velocityCutoff = 0.01;
          const dampingFactor = 0.4;
          try {
            for (let i = 0; i < balls.length; i++) {
              const ballA = balls[i];
              const radiusA = parseFloat(ballA.style.width) / 2;
              const xA = parseFloat(ballA.style.left) + radiusA;
              const yA = parseFloat(ballA.style.top) + radiusA;
              for (let j = i + 1; j < balls.length; j++) {
                const ballB = balls[j];
                const radiusB = parseFloat(ballB.style.width) / 2;
                const xB = parseFloat(ballB.style.left) + radiusB;
                const yB = parseFloat(ballB.style.top) + radiusB;
                const dx = xA - xB;
                const dy = yA - yB;
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance < radiusA + radiusB) {
                  const nx = dx / distance;
                  const ny = dy / distance;
                  const dvx = ballA.velocityX - ballB.velocityX;
                  const dvy = ballA.velocityY - ballB.velocityY;
                  const impactSpeed = dvx * nx + dvy * ny;
                  if (impactSpeed < 0) {
                    const impulse = (2 * impactSpeed) / (radiusA + radiusB);
                    const isAStopped =
                      Math.abs(ballA.velocityX) < velocityCutoff && Math.abs(ballA.velocityY) < velocityCutoff;
                    const isBStopped =
                      Math.abs(ballB.velocityX) < velocityCutoff && Math.abs(ballB.velocityY) < velocityCutoff;
                    const adjustedImpulse = (isAStopped || isBStopped) ? impulse * dampingFactor : impulse;
                    ballA.velocityX -= adjustedImpulse * radiusB * nx;
                    ballA.velocityY -= adjustedImpulse * radiusB * ny;
                    ballB.velocityX += adjustedImpulse * radiusA * nx;
                    ballB.velocityY += adjustedImpulse * radiusA * ny;
                    if (Math.abs(ballA.velocityX) < velocityCutoff) ballA.velocityX = 0;
                    if (Math.abs(ballA.velocityY) < velocityCutoff) ballA.velocityY = 0;
                    if (Math.abs(ballB.velocityX) < velocityCutoff) ballB.velocityX = 0;
                    if (Math.abs(ballB.velocityY) < velocityCutoff) ballB.velocityY = 0;
                  }
                }
              }
            }
          } catch (error) {
            console.error("Error handling collisions:", error);
          }
        }
        updateBalls();
        
        // --- Falling Quotes Background Feature ---
        // Using two separate tracks to avoid overlapping quotes.
        const quoteContainer = document.querySelector(".quote-container");
        function createFallingQuote(track) {
          const quotes = [
            "Life isn’t about what you know, It’s about what you’re able to figure out.",
            "The best time to plant a tree is 20 years ago, the second best time is today.",
            "The rich get richer because the poor see every opportunity as a scam",
            "Money is not the key to happiness, \nit is the key to pursuing opportunities.",
            "Cold water feels warm when your hands are freezing.",
            "Regret is proof you cared. But growth is proof you learned."
          ];
          const quoteText = quotes[Math.floor(Math.random() * quotes.length)];
          const quoteElem = document.createElement("div");
          quoteElem.className = "falling-quote";
          quoteElem.innerText = quoteText;
          // Position the quote based on track so that they never overlap.
          if (track === 0) {
            quoteElem.style.left = (Math.random() * 15 + 5) + "%";
          } else {
            quoteElem.style.left = (Math.random() * 15 + 60) + "%";
          }
          quoteElem.style.top = "0px";
          // Apply a falling animation of 20s duration.
          quoteElem.style.animation = "fall 20s linear forwards";
          quoteContainer.appendChild(quoteElem);
          setTimeout(function () {
            if (quoteElem.parentElement === quoteContainer) {
              quoteContainer.removeChild(quoteElem);
            }
          }, 21000);
        }
        // Create one quote per track every 10 seconds.
        setInterval(function () {
          createFallingQuote(0);
        }, 10000);
        setInterval(function () {
          createFallingQuote(1);
        }, 10000);
      });
    </script>
  </body>
</html>
