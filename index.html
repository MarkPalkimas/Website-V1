<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mark Palkimas' Personal Website</title>
    <link rel="stylesheet" href="app.css">
    <script>
        // Redirect to mobile version if on a mobile device
        if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            window.location.href = "mobile.html";
        }
    </script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mark Palkimas' Personal Website</title>
    <link rel="stylesheet" href="app.css">
    <style>
        /* Existing styles remain unchanged */
        .profile-photo:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: box-shadow 0.3s;
        }
        /* Removed the absolute enlargement styling so that the profile image is not moved */
        .profile-photo.enlarged {
            /* No longer used in this implementation */
        }
        .social-popup, .about-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            z-index: 1010;
            text-align: center;
            max-width: 600px;
        }
        /* New About Popup styling: display profile image and text side by side */
        .about-popup-content {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 30px;
            text-align: left;
        }
        .about-popup-photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 5px solid #000;
            flex-shrink: 0;
        }
        .about-popup-text {
            max-width: 350px;
        }
        .about-popup-text h2 {
            margin-bottom: 10px;
        }
        .social-popup-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
            text-align: center;
        }
        .social-popup-content img {
            width: 60px;
            height: 60px;
            margin: 0 15px;
        }
        .dimmed {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1005;
            display: none;
        }
        .footer {
            position: relative;
            bottom: 0;
            background-color: rgba(171, 171, 171, 1);
            width: 100%;
        }
        .intro-text.hidden {
            display: none;
        }
        .social-links.hidden {
            display: none;
        }
        .reset-btn {
            display: none;
            background-color: #ff2222;
            color: white;
            padding: 10px 20px;
            font-size: 20px;
            width: fit-content;
            height: fit-content;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1020;
        }
        .reset-btn:hover {
            background-color: #c21010;
        }
        .ball {
            position: absolute;
            border-radius: 50%;
            z-index: 1000;
            pointer-events: none;
        }
        /* Falling Quotes Styles */
        .quote-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }
        .falling-quote {
            position: absolute;
            font-size: 1.5rem;
            font-family: 'Poppins', sans-serif;
            color: rgba(0, 0, 0, 0.7);
            opacity: 0.9;
            white-space: nowrap;
            text-shadow: 1px 1px 3px rgba(255,255,255,0.8);
        }
        @keyframes fall {
            0% {
                transform: translate(0, 0);
                opacity: 0.9;
            }
            25% {
                transform: translate(20px, 25%);
                opacity: 0.85;
            }
            50% {
                transform: translate(-20px, 50%);
                opacity: 0.8;
            }
            75% {
                transform: translate(20px, 75%);
                opacity: 0.75;
            }
            100% {
                transform: translate(0, 105vh);
                opacity: 0;
            }
        }
        /* New Layout Adjustments for Modern Full-Window Sizing */
        /* The initial view is 100vh so that the footer contacts are visible.
           The extra content (footer-bottom with drop ball and admin) is revealed on scroll. */
        .content {
            padding-top: 70px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        /* Adjust the About section to center properly */
        #about {
            margin: 0;
            width: 100%;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
        }
        .profile-photo {
            margin: 0 20px;
            width: 280px;
            height: 380px;
            border-radius: 50%;
            border: 8px solid #000;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .intro-text {
            margin: 20px;
        }
        /* Footer Contacts visible always; Footer-bottom (drop ball & admin) hidden initially */
        .footer-bottom {
            display: none;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 10px;
            padding-top: 15px;
            flex-wrap: wrap;
        }
        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

    <!-- Dimming Overlay -->
    <div class="dimmed"></div>

    <!-- Quote Container for Falling Quotes Background -->
    <div class="quote-container"></div>

    <header class="header">
        <div class="nav-bar">
            <div class="logo">Mark Palkimas</div>
            <ul class="nav-links">
                <li><a href="#about" class="about-link">About</a></li>
                <li><a href="projects.html">Projects</a></li>
                <li><a href="#contact" class="contact-link">Contact</a></li>
            </ul>
        </div>
    </header>

    <main class="content">
        <section id="about" class="section">
            <img src="profile.jpg" alt="Profile Photo" class="profile-photo">
            <div class="intro-text">
                <h2>Hello, I'm Mark Palkimas</h2>
            </div>
            <!-- Modified About Popup: now includes a cloned profile photo and text side by side -->
            <div class="about-section about-popup">
                <div class="about-popup-content">
                    <img src="profile.jpg" alt="Profile Photo" class="about-popup-photo">
                    <div class="about-popup-text">
                        <h2>About Me</h2>
                        <p>This section contains more detailed information about me and my professional background.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="portfolio" class="section">
            <!-- Portfolio content goes here -->
        </section>
    </main>

    <footer class="footer">
        <p>Contact Me</p>
        <div class="social-links">
            <a href="https://www.instagram.com/ya.boimark" target="_blank">
                <img src="iconmonstr-instagram-11-240.png" alt="Instagram" class="social-logo">
            </a>
            <a href="https://www.linkedin.com/in/mark-palkimas-27514a230/" target="_blank">
                <img src="iconmonstr-linkedin-1-240.png" alt="LinkedIn" class="social-logo">
            </a>
            <a href="https://github.com/MarkPalkimas" target="_blank">
                <img src="github-logo.png" alt="GitHub" class="social-logo">
            </a>
            <a href="mailto:mark.palkimas@gmail.com" target="_blank">
                <img src="iconmonstr-gmail-1-240.png" alt="Gmail" class="social-logo">
            </a>
            <a href="https://www.youtube.com/@markpalkimas" target="_blank">
                <img src="iconmonstr-youtube-6-240.png" alt="YouTube" class="social-logo">
            </a>
        </div>
        
        <!-- Footer-bottom: initially hidden; will reveal on scroll -->
        <div class="footer-bottom">
            <button class="gravity-btn">Drop Ball</button>
            <button class="admin-btn">Admin</button>
            <p class="copyright">© 2024 Mark Palkimas</p>
        </div>
    </footer>

    <div class="social-popup">
        <div class="social-popup-content">
            <p>Contact Links:</p>
            <div class="popup-social-links">
                <!-- Social links will be cloned here dynamically -->
            </div>
        </div>
    </div>

    <!-- Reset button -->
    <button class="reset-btn">Reset</button>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const profilePic = document.querySelector(".profile-photo");
            const aboutSection = document.querySelector(".about-popup");
            const aboutLink = document.querySelector(".about-link");
            const contactLink = document.querySelector(".contact-link");
            const socialLinks = document.querySelector(".social-links");
            const footer = document.querySelector(".footer");
            const footerBottom = document.querySelector(".footer-bottom");
            const popup = document.querySelector(".social-popup");
            const popupContent = document.querySelector(".popup-social-links");
            const dimmedOverlay = document.querySelector(".dimmed");
            const adminBtn = document.querySelector(".admin-btn");
            const gravityBtn = document.querySelector(".gravity-btn");
            const resetBtn = document.querySelector(".reset-btn");
            const introText = document.querySelector(".intro-text");
            const balls = [];
            const headerHeight = document.querySelector('.header').offsetHeight;
            
            // Hide footer-bottom initially; show only when user scrolls down
            window.addEventListener('scroll', () => {
                if (window.scrollY > 0) {
                    footerBottom.style.display = "flex";
                } else {
                    footerBottom.style.display = "none";
                }
            });

            gravityBtn.addEventListener("click", () => {
                dropBall();
                resetBtn.style.display = "block";
            });

            resetBtn.addEventListener("click", () => {
                resetBalls();
                resetBtn.style.display = "none";
            });

            const togglePopup = (popupElement) => {
                popupElement.style.display = "flex";
                dimmedOverlay.style.display = "block";
            };

            const closePopup = (popupElement) => {
                popupElement.style.display = "none";
                dimmedOverlay.style.display = "none";
            };

            // Open About Popup on click of About link or profile image
            profilePic.addEventListener("click", () => {
                togglePopup(aboutSection);
            });

            aboutLink.addEventListener("click", (e) => {
                e.preventDefault();
                togglePopup(aboutSection);
            });

            contactLink.addEventListener("click", (e) => {
                e.preventDefault();
                closePopup(aboutSection);
                togglePopup(popup);
                popupContent.innerHTML = socialLinks.innerHTML;
            });

            dimmedOverlay.addEventListener("click", () => {
                closePopup(aboutSection);
                closePopup(popup);
            });

            adminBtn.addEventListener("click", () => {
                const password = prompt("Enter password:");
                if (password === "mark2005") {
                    window.location.href = "admin.html";
                } else {
                    alert("Denied.");
                }
            });

            function dropBall() {
                const ball = document.createElement("div");
                ball.className = "ball";
                ball.style.backgroundColor = getRandomColor();
                ball.style.width = ball.style.height = Math.random() * 30 + 40 + "px";
                ball.style.left = Math.random() * (window.innerWidth - 50) + "px";
                ball.velocityY = Math.random() * 4 + 1;
                ball.velocityX = Math.random() * 2 - 1;
                ball.friction = 0.8;
                ball.bounceOffset = 10; // Lower bounce height

                document.body.appendChild(ball);
                balls.push(ball);
            }

            function resetBalls() {
                balls.forEach(ball => ball.remove());
                balls.length = 0;
            }

            function getRandomColor() {
                const letters = "0123456789ABCDEF";
                let color = "#";
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }
            function updateBalls() {
                const velocityCutoff = 0.01; // Threshold for stopping jittering

                balls.forEach((ball, index) => {
                    let currentTop = parseFloat(ball.style.top) || 0;
                    let currentLeft = parseFloat(ball.style.left) || 0;
                    let newTop = currentTop + ball.velocityY;
                    let newLeft = currentLeft + ball.velocityX;

                    // Bounce off floor: 10px above footer contacts (which are lower on scroll)
                    const footerTop = footer.getBoundingClientRect().top + window.scrollY - 10;
                    if (newTop + ball.offsetHeight >= footerTop - ball.bounceOffset) {
                        newTop = footerTop - ball.offsetHeight - ball.bounceOffset;
                        ball.velocityY *= -ball.friction;
                        if (Math.abs(ball.velocityY) < velocityCutoff) {
                            ball.velocityY = 0;
                        }
                    } else {
                        ball.velocityY += 0.3; // Gravity effect
                    }

                    // Bounce off walls
                    if (newLeft <= 0 || newLeft + ball.offsetWidth >= window.innerWidth) {
                        newLeft = newLeft <= 0 ? 0 : window.innerWidth - ball.offsetWidth;
                        ball.velocityX *= -1;
                        if (Math.abs(ball.velocityX) < velocityCutoff) {
                            ball.velocityX = 0;
                        }
                    }

                    if (Math.abs(ball.velocityX) < velocityCutoff) ball.velocityX = 0;
                    if (Math.abs(ball.velocityY) < velocityCutoff) ball.velocityY = 0;

                    ball.style.top = newTop + "px";
                    ball.style.left = newLeft + "px";
                });

                handleBallCollisions();
                requestAnimationFrame(updateBalls);
            }

            function handleBallCollisions() {
                const velocityCutoff = 0.01;
                const dampingFactor = 0.4;
                try {
                    for (let i = 0; i < balls.length; i++) {
                        const ballA = balls[i];
                        const radiusA = parseFloat(ballA.style.width) / 2;
                        const xA = parseFloat(ballA.style.left) + radiusA;
                        const yA = parseFloat(ballA.style.top) + radiusA;
                        for (let j = i + 1; j < balls.length; j++) {
                            const ballB = balls[j];
                            const radiusB = parseFloat(ballB.style.width) / 2;
                            const xB = parseFloat(ballB.style.left) + radiusB;
                            const yB = parseFloat(ballB.style.top) + radiusB;
                            const dx = xA - xB;
                            const dy = yA - yB;
                            const distance = Math.sqrt(dx * dx + dy * dy);
                            if (distance < radiusA + radiusB) {
                                const nx = dx / distance;
                                const ny = dy / distance;
                                const dvx = ballA.velocityX - ballB.velocityX;
                                const dvy = ballA.velocityY - ballB.velocityY;
                                const impactSpeed = dvx * nx + dvy * ny;
                                if (impactSpeed < 0) {
                                    const impulse = (2 * impactSpeed) / (radiusA + radiusB);
                                    const isBallAStopped = Math.abs(ballA.velocityX) < velocityCutoff && Math.abs(ballA.velocityY) < velocityCutoff;
                                    const isBallBStopped = Math.abs(ballB.velocityX) < velocityCutoff && Math.abs(ballB.velocityY) < velocityCutoff;
                                    const adjustedImpulse = (isBallAStopped || isBallBStopped) ? impulse * dampingFactor : impulse;
                                    ballA.velocityX -= adjustedImpulse * radiusB * nx;
                                    ballA.velocityY -= adjustedImpulse * radiusB * ny;
                                    ballB.velocityX += adjustedImpulse * radiusA * nx;
                                    ballB.velocityY += adjustedImpulse * radiusA * ny;
                                    if (Math.abs(ballA.velocityX) < velocityCutoff) ballA.velocityX = 0;
                                    if (Math.abs(ballA.velocityY) < velocityCutoff) ballA.velocityY = 0;
                                    if (Math.abs(ballB.velocityX) < velocityCutoff) ballB.velocityX = 0;
                                    if (Math.abs(ballB.velocityY) < velocityCutoff) ballB.velocityY = 0;
                                }
                            }
                        }
                    }
                } catch (error) {
                    console.error('Error handling collisions:', error);
                }
            }

            let lastScrollTop = window.scrollY;
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const scrollDirection = scrollTop > lastScrollTop ? 1 : -1;
                lastScrollTop = scrollTop;
                balls.forEach(ball => {
                    ball.velocityY += scrollDirection * 0.5;
                });
            });

            updateBalls();

            // Falling Quotes Background Feature with slow, cascading motion and horizontal oscillation.
            (function() {
                const quotes = [
                    "Life isn’t about what you know, It’s about what you’re able to figure out.",
                    "The best time to plant a tree is 20 years ago, the second best time is today.",
                    "The rich get richer because the poor see every opportunity as a scam",
                    "Money is not the key to happiness, \nit is the key to pursuing opportunities.",
                    "Cold water feels warm when your hands are freezing.",
                    "Regret is proof you cared. But growth is proof you learned."
                ];
                const quoteContainer = document.querySelector('.quote-container');
                function createFallingQuote() {
                    const quoteText = quotes[Math.floor(Math.random() * quotes.length)];
                    const quoteElem = document.createElement("div");
                    quoteElem.className = "falling-quote";
                    quoteElem.innerText = quoteText;
                    // Position the quote so that it is fully visible horizontally.
                    quoteElem.style.left = Math.random() * (window.innerWidth - 300) + "px";
                    // Start at the top of the container (fully visible)
                    quoteElem.style.top = "0px";
                    // Apply a slower falling animation (30s duration) with horizontal oscillation.
                    quoteElem.style.animation = "fall 30s linear forwards";
                    quoteContainer.appendChild(quoteElem);
                    setTimeout(() => {
                        if (quoteElem.parentElement === quoteContainer) {
                            quoteContainer.removeChild(quoteElem);
                        }
                    }, 31000);
                }
                // Always have two quotes on screen; check every 5 seconds.
                setInterval(() => {
                    if (quoteContainer.childElementCount < 2) {
                        createFallingQuote();
                    }
                }, 5000);
            })();
        });
    </script>
</body>
</html>
